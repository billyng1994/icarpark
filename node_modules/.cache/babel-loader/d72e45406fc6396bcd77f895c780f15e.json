{"ast":null,"code":"var _jsxFileName = \"D:\\\\Venturnix\\\\ecommerce\\\\ecommerce-frontend\\\\src\\\\ui\\\\page\\\\ShoppingCartPage\\\\index.tsx\";\nimport React from 'react';\nimport { Breadcrumb, Button, Container } from 'react-bootstrap';\nimport BackendExtService from '../../../extService/BackendExtService';\nimport ProductList from '../../component/ProductList';\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ShoppingCartPage extends React.Component {\n  //initial state\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.onLoadedShoppingCartItems = this.onLoadedShoppingCartItems.bind(this);\n    this.onClickRemoveItemButton = this.onClickRemoveItemButton.bind(this);\n    this.onClickCheckoutButton = this.onClickCheckoutButton.bind(this);\n  }\n\n  componentDidMount() {\n    const cart = this.props.shoppingCartService.getCart();\n    const productIds = Object.keys(cart);\n    /*find out all the keys in the object*/\n\n    BackendExtService.getShoppingCartItems(productIds, this.onLoadedShoppingCartItems);\n  }\n\n  onLoadedShoppingCartItems(data) {\n    this.setState({\n      shoppingCartItems: data\n    });\n  }\n\n  onClickCheckoutButton() {\n    const checkoutItems = [];\n\n    for (let productId of Object.keys(this.state.shoppingCartItems)) {\n      checkoutItems.push({\n        productId: +productId,\n        productQuantity: 1\n      });\n    }\n\n    BackendExtService.checkout(checkoutItems, this.onCreatedTransaction);\n  }\n\n  onCreatedTransaction(data) {\n    window.location.href = \"#/checkout/\" + data.transactionId;\n  }\n\n  onClickRemoveItemButton(productId) {\n    this.props.shoppingCartService.removeFromCart(productId); // ... this state.shoppingCartItems means take everything\n    //inside this.props.displayItems out and put them into the new object\n\n    const shoppingCartItems = { ...this.state.shoppingCartItems\n    };\n    delete shoppingCartItems[productId];\n    this.setState({\n      shoppingCartItems: shoppingCartItems\n    });\n  }\n\n  renderCheckoutSection() {\n    if (!this.state.shoppingCartItems) {\n      return null;\n    }\n\n    let total = 0; // the productId is the 1,2 in the shoppingCartItem list and take the sum of the price\n\n    for (let productId of Object.keys(this.state.shoppingCartItems)) {\n      total += this.state.shoppingCartItems[+productId].price;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total Price: \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: this.onClickCheckoutButton,\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n        children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n          href: \"#/\",\n          children: \"All Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n          active: true,\n          children: \"Shopping Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n        shouldShowRemoveButton: true,\n        displayItems: this.state.shoppingCartItems,\n        onClickRemoveItemButton: this.onClickRemoveItemButton,\n        onUpdateQuantity: this.props.onUpdateQuantity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), this.renderCheckoutSection()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this);\n  }\n\n} // ArrayList<JSXElement> cartItems = new ArrayList<>();\n// for (productIds) {\n// \tcartItems.push(\n// \t\tnew TableRow(productId)\n// \t)\n// }\n// return [\n// \t<tr>1</tr>,\n// \t<tr>2</tr>,\n// \t<tr>3</tr>\n// ];\n// | |\n//  V\n// render() {\n// \t<Table>\n// \t\t{this.renderShoppingCartItems()}\n// \t</Table>\n// }\n// | |\n//  V\n//  render() {\n//  \t<Table>\n//  \t\t<tr>1</tr>\n// \t\t<tr>2</tr>\n// \t\t<tr>3</tr>\n// \t</Table>\n//  }","map":{"version":3,"sources":["D:/Venturnix/ecommerce/ecommerce-frontend/src/ui/page/ShoppingCartPage/index.tsx"],"names":["React","Breadcrumb","Button","Container","BackendExtService","ProductList","ShoppingCartPage","Component","constructor","props","state","onLoadedShoppingCartItems","bind","onClickRemoveItemButton","onClickCheckoutButton","componentDidMount","cart","shoppingCartService","getCart","productIds","Object","keys","getShoppingCartItems","data","setState","shoppingCartItems","checkoutItems","productId","push","productQuantity","checkout","onCreatedTransaction","window","location","href","transactionId","removeFromCart","renderCheckoutSection","total","price","render","onUpdateQuantity"],"mappings":"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","sourcesContent":["import { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Breadcrumb, Button, Container, Table } from 'react-bootstrap';\r\nimport { ProductMap, Transaction } from '../../../domain/dto/backendDos';\r\nimport { ShoppingCartItem } from '../../../domain/shoppingCartDos';\r\nimport BackendExtService from '../../../extService/BackendExtService';\r\nimport ShoppingCartService from '../../../service/ShoppingCartService';\r\nimport ProductList from '../../component/ProductList';\r\nimport Quantity from '../../component/quantity';\r\nimport './style.css';\r\n\r\ntype Props = {\r\n    shoppingCartService: ShoppingCartService\r\n    onUpdateQuantity: (productId: number, quantity: number) => void\r\n};\r\ntype State = {\r\n    shoppingCartItems?: ProductMap\r\n};\r\n\r\nexport default class ShoppingCartPage extends React.Component<Props, State> {\r\n    state = {} as State; //initial state\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.onLoadedShoppingCartItems = this.onLoadedShoppingCartItems.bind(this);\r\n        this.onClickRemoveItemButton = this.onClickRemoveItemButton.bind(this);\r\n        this.onClickCheckoutButton = this.onClickCheckoutButton.bind(this);\r\n        \r\n    }\r\n    componentDidMount() {\r\n        const cart = this.props.shoppingCartService.getCart();\r\n        const productIds = Object.keys(cart); /*find out all the keys in the object*/\r\n        BackendExtService.getShoppingCartItems(productIds, this.onLoadedShoppingCartItems)\r\n    }\r\n\r\n    onLoadedShoppingCartItems(data: ProductMap) {\r\n        this.setState({\r\n            shoppingCartItems: data\r\n        })\r\n    }\r\n\r\n    onClickCheckoutButton() {\r\n        const checkoutItems: ShoppingCartItem[] = [];\r\n        for (let productId of Object.keys(this.state.shoppingCartItems!)) {\r\n            checkoutItems.push({\r\n                productId: +productId,\r\n                productQuantity: 1\r\n            })\r\n        }\r\n        BackendExtService.checkout(checkoutItems, this.onCreatedTransaction)\r\n        \r\n    }\r\n    onCreatedTransaction(data: Transaction) {\r\n        window.location.href = \"#/checkout/\" + data.transactionId;\r\n    }\r\n\r\n    onClickRemoveItemButton(productId: number) {\r\n        this.props.shoppingCartService.removeFromCart(productId);\r\n        // ... this state.shoppingCartItems means take everything\r\n        //inside this.props.displayItems out and put them into the new object\r\n        const shoppingCartItems = { ...this.state.shoppingCartItems };\r\n\r\n        delete shoppingCartItems[productId];\r\n\r\n        this.setState({\r\n            shoppingCartItems: shoppingCartItems\r\n        });\r\n    }\r\n\r\n    renderCheckoutSection() {\r\n        if (!this.state.shoppingCartItems) {\r\n            return null;\r\n        }\r\n        let total = 0;\r\n        // the productId is the 1,2 in the shoppingCartItem list and take the sum of the price\r\n        for (let productId of Object.keys(this.state.shoppingCartItems)) {\r\n            total += this.state.shoppingCartItems[+productId].price;\r\n        }\r\n        return (\r\n            <section>\r\n                <hr /><h3>Total Price: {total}</h3>\r\n                <Button variant=\"primary\" onClick={this.onClickCheckoutButton}>Checkout</Button>\r\n            </section>\r\n        )\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Breadcrumb>\r\n                    <Breadcrumb.Item href=\"#/\">All Products</Breadcrumb.Item>\r\n                    <Breadcrumb.Item active>Shopping Cart</Breadcrumb.Item>\r\n                </Breadcrumb>\r\n\r\n                {/* TODO: Add back ProductList Component here*/}\r\n                <ProductList\r\n                    shouldShowRemoveButton={true}\r\n                    displayItems={this.state.shoppingCartItems}\r\n                    onClickRemoveItemButton={this.onClickRemoveItemButton}\r\n                    onUpdateQuantity={this.props.onUpdateQuantity}\r\n                />\r\n\r\n                {this.renderCheckoutSection()}\r\n\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\n// ArrayList<JSXElement> cartItems = new ArrayList<>();\r\n// for (productIds) {\r\n// \tcartItems.push(\r\n// \t\tnew TableRow(productId)\r\n// \t)\r\n// }\r\n\r\n// return [\r\n// \t<tr>1</tr>,\r\n// \t<tr>2</tr>,\r\n// \t<tr>3</tr>\r\n// ];\r\n\r\n// | |\r\n//  V\r\n\r\n// render() {\r\n// \t<Table>\r\n// \t\t{this.renderShoppingCartItems()}\r\n// \t</Table>\r\n// }\r\n\r\n// | |\r\n//  V\r\n\r\n//  render() {\r\n//  \t<Table>\r\n//  \t\t<tr>1</tr>\r\n// \t\t<tr>2</tr>\r\n// \t\t<tr>3</tr>\r\n// \t</Table>\r\n//  }"]},"metadata":{},"sourceType":"module"}