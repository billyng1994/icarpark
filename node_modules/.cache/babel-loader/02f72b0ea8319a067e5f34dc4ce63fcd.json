{"ast":null,"code":"import _objectSpread from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Breadcrumb,Button,Container}from'react-bootstrap';import BackendExtService from'../../../extService/BackendExtService';import ProductList from'../../component/ProductList';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShoppingCartPage=/*#__PURE__*/function(_React$Component){_inherits(ShoppingCartPage,_React$Component);var _super=_createSuper(ShoppingCartPage);//initial state\nfunction ShoppingCartPage(props){var _this;_classCallCheck(this,ShoppingCartPage);_this=_super.call(this,props);_this.state={};_this.onLoadedShoppingCartItems=_this.onLoadedShoppingCartItems.bind(_assertThisInitialized(_this));_this.onClickRemoveItemButton=_this.onClickRemoveItemButton.bind(_assertThisInitialized(_this));_this.onClickCheckoutButton=_this.onClickCheckoutButton.bind(_assertThisInitialized(_this));return _this;}_createClass(ShoppingCartPage,[{key:\"componentDidMount\",value:function componentDidMount(){var cart=this.props.shoppingCartService.getCart();var productIds=Object.keys(cart);/*find out all the keys in the object*/BackendExtService.getShoppingCartItems(productIds,this.onLoadedShoppingCartItems);}},{key:\"onLoadedShoppingCartItems\",value:function onLoadedShoppingCartItems(data){var cart=this.props.shoppingCartService.getCart();var displayItems={};for(var _i=0,_Object$keys=Object.keys(data);_i<_Object$keys.length;_i++){var productId=_Object$keys[_i];var value=data[+productId];displayItems[+productId]={id:value.id,name:value.name,description:value.description,price:value.price,imageUrl:value.imageUrl,quantity:cart[+productId].productQuantity};}this.setState({shoppingCartItems:displayItems});}},{key:\"onClickCheckoutButton\",value:function onClickCheckoutButton(){var checkoutItems=[];for(var _i2=0,_Object$keys2=Object.keys(this.state.shoppingCartItems);_i2<_Object$keys2.length;_i2++){var productId=_Object$keys2[_i2];var item=this.state.shoppingCartItems[+productId];checkoutItems.push({productId:+productId,productQuantity:item.quantity});}BackendExtService.checkout(checkoutItems,this.onCreatedTransaction);}},{key:\"onCreatedTransaction\",value:function onCreatedTransaction(data){window.location.href=\"#/checkout/\"+data.transactionId;}},{key:\"onClickRemoveItemButton\",value:function onClickRemoveItemButton(productId){this.props.shoppingCartService.removeFromCart(productId);// ... this state.shoppingCartItems means take everything\n//inside this.props.displayItems out and put them into the new object\nvar shoppingCartItems=_objectSpread({},this.state.shoppingCartItems);delete shoppingCartItems[productId];this.setState({shoppingCartItems:shoppingCartItems});}},{key:\"onUpdateQuantity\",value:function onUpdateQuantity(productId,quantity){}},{key:\"renderCheckoutSection\",value:function renderCheckoutSection(){if(!this.state.shoppingCartItems){return null;}var total=0;// the productId is the 1,2 in the shoppingCartItem list and take the sum of the price\nfor(var _i3=0,_Object$keys3=Object.keys(this.state.shoppingCartItems);_i3<_Object$keys3.length;_i3++){var productId=_Object$keys3[_i3];total+=this.state.shoppingCartItems[+productId].price;}return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total Price: \",total]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:this.onClickCheckoutButton,children:\"Checkout\"})]});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"shoppingCart\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Breadcrumb,{children:[/*#__PURE__*/_jsx(Breadcrumb.Item,{href:\"#/\",children:\"All Products\"}),/*#__PURE__*/_jsx(Breadcrumb.Item,{active:true,children:\"Shopping Cart\"})]}),/*#__PURE__*/_jsx(ProductList,{shouldShowRemoveButton:true,displayItems:this.state.shoppingCartItems,onClickRemoveItemButton:this.onClickRemoveItemButton,onUpdateQuantity:this.onUpdateQuantity}),this.renderCheckoutSection()]})});}}]);return ShoppingCartPage;}(React.Component);// ArrayList<JSXElement> cartItems = new ArrayList<>();\n// for (productIds) {\n// \tcartItems.push(\n// \t\tnew TableRow(productId)\n// \t)\n// }\n// return [\n// \t<tr>1</tr>,\n// \t<tr>2</tr>,\n// \t<tr>3</tr>\n// ];\n// | |\n//  V\n// render() {\n// \t<Table>\n// \t\t{this.renderShoppingCartItems()}\n// \t</Table>\n// }\n// | |\n//  V\n//  render() {\n//  \t<Table>\n//  \t\t<tr>1</tr>\n// \t\t<tr>2</tr>\n// \t\t<tr>3</tr>\n// \t</Table>\n//  }\nexport{ShoppingCartPage as default};","map":{"version":3,"sources":["D:/Venturnix/ecommerce/ecommerce-frontend/src/ui/page/ShoppingCartPage/index.tsx"],"names":["React","Breadcrumb","Button","Container","BackendExtService","ProductList","ShoppingCartPage","props","state","onLoadedShoppingCartItems","bind","onClickRemoveItemButton","onClickCheckoutButton","cart","shoppingCartService","getCart","productIds","Object","keys","getShoppingCartItems","data","displayItems","productId","value","id","name","description","price","imageUrl","quantity","productQuantity","setState","shoppingCartItems","checkoutItems","item","push","checkout","onCreatedTransaction","window","location","href","transactionId","removeFromCart","total","onUpdateQuantity","renderCheckoutSection","Component"],"mappings":"+7BAEA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,MAArB,CAA6BC,SAA7B,KAAqD,iBAArD,CAGA,MAAOC,CAAAA,iBAAP,KAA8B,uCAA9B,CAEA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CAEA,MAAO,aAAP,C,2FASqBC,CAAAA,gB,gIACI;AACrB,0BAAYC,KAAZ,CAA0B,kDACtB,uBAAMA,KAAN,EADsB,MAD1BC,KAC0B,CADlB,EACkB,CAGtB,MAAKC,yBAAL,CAAiC,MAAKA,yBAAL,CAA+BC,IAA/B,+BAAjC,CACA,MAAKC,uBAAL,CAA+B,MAAKA,uBAAL,CAA6BD,IAA7B,+BAA/B,CACA,MAAKE,qBAAL,CAA6B,MAAKA,qBAAL,CAA2BF,IAA3B,+BAA7B,CALsB,aAMzB,C,8DACD,4BAAoB,CAChB,GAAMG,CAAAA,IAAI,CAAG,KAAKN,KAAL,CAAWO,mBAAX,CAA+BC,OAA/B,EAAb,CACA,GAAMC,CAAAA,UAAU,CAAGC,MAAM,CAACC,IAAP,CAAYL,IAAZ,CAAnB,CAAsC,uCACtCT,iBAAiB,CAACe,oBAAlB,CAAuCH,UAAvC,CAAmD,KAAKP,yBAAxD,EACH,C,yCAED,mCAA0BW,IAA1B,CAA4C,CACxC,GAAMP,CAAAA,IAAI,CAAG,KAAKN,KAAL,CAAWO,mBAAX,CAA+BC,OAA/B,EAAb,CAEA,GAAMM,CAAAA,YAAwB,CAAG,EAAjC,CACA,0BAAsBJ,MAAM,CAACC,IAAP,CAAYE,IAAZ,CAAtB,6BAAyC,CAApC,GAAIE,CAAAA,SAAS,iBAAb,CACD,GAAMC,CAAAA,KAAK,CAAGH,IAAI,CAAC,CAACE,SAAF,CAAlB,CACAD,YAAY,CAAC,CAACC,SAAF,CAAZ,CAA2B,CACvBE,EAAE,CAAED,KAAK,CAACC,EADa,CAEvBC,IAAI,CAAEF,KAAK,CAACE,IAFW,CAGvBC,WAAW,CAAEH,KAAK,CAACG,WAHI,CAIvBC,KAAK,CAAEJ,KAAK,CAACI,KAJU,CAKvBC,QAAQ,CAAEL,KAAK,CAACK,QALO,CAMvBC,QAAQ,CAAEhB,IAAI,CAAC,CAACS,SAAF,CAAJ,CAAiBQ,eANJ,CAA3B,CAQH,CAED,KAAKC,QAAL,CAAc,CACVC,iBAAiB,CAAEX,YADT,CAAd,EAGH,C,qCAED,gCAAwB,CACpB,GAAMY,CAAAA,aAAiC,CAAG,EAA1C,CACA,4BAAsBhB,MAAM,CAACC,IAAP,CAAY,KAAKV,KAAL,CAAWwB,iBAAvB,CAAtB,gCAAkE,CAA7D,GAAIV,CAAAA,SAAS,mBAAb,CACD,GAAMY,CAAAA,IAAI,CAAG,KAAK1B,KAAL,CAAWwB,iBAAX,CAA8B,CAACV,SAA/B,CAAb,CACAW,aAAa,CAACE,IAAd,CAAmB,CACfb,SAAS,CAAE,CAACA,SADG,CAEfQ,eAAe,CAAEI,IAAI,CAACL,QAFP,CAAnB,EAIH,CACDzB,iBAAiB,CAACgC,QAAlB,CAA2BH,aAA3B,CAA0C,KAAKI,oBAA/C,EAEH,C,oCACD,8BAAqBjB,IAArB,CAAwC,CACpCkB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,cAAgBpB,IAAI,CAACqB,aAA5C,CACH,C,uCAED,iCAAwBnB,SAAxB,CAA2C,CACvC,KAAKf,KAAL,CAAWO,mBAAX,CAA+B4B,cAA/B,CAA8CpB,SAA9C,EACA;AACA;AACA,GAAMU,CAAAA,iBAAiB,kBAAQ,KAAKxB,KAAL,CAAWwB,iBAAnB,CAAvB,CAEA,MAAOA,CAAAA,iBAAiB,CAACV,SAAD,CAAxB,CAEA,KAAKS,QAAL,CAAc,CACVC,iBAAiB,CAAEA,iBADT,CAAd,EAGH,C,gCAED,0BAAiBV,SAAjB,CAAoCO,QAApC,CAAsD,CAErD,C,qCAED,gCAAwB,CACpB,GAAI,CAAC,KAAKrB,KAAL,CAAWwB,iBAAhB,CAAmC,CAC/B,MAAO,KAAP,CACH,CACD,GAAIW,CAAAA,KAAK,CAAG,CAAZ,CACA;AACA,4BAAsB1B,MAAM,CAACC,IAAP,CAAY,KAAKV,KAAL,CAAWwB,iBAAvB,CAAtB,gCAAiE,CAA5D,GAAIV,CAAAA,SAAS,mBAAb,CACDqB,KAAK,EAAI,KAAKnC,KAAL,CAAWwB,iBAAX,CAA6B,CAACV,SAA9B,EAAyCK,KAAlD,CACH,CACD,mBACI,wCAEI,aAFJ,cAEU,sCAAkBgB,KAAlB,GAFV,cAGI,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAE,KAAK/B,qBAAxC,sBAHJ,GADJ,CAOH,C,sBAID,iBAAS,CACL,mBACI,YAAK,SAAS,CAAC,cAAf,uBACI,MAAC,SAAD,yBACI,MAAC,UAAD,yBACI,KAAC,UAAD,CAAY,IAAZ,EAAiB,IAAI,CAAC,IAAtB,0BADJ,cAEI,KAAC,UAAD,CAAY,IAAZ,EAAiB,MAAM,KAAvB,2BAFJ,GADJ,cAOI,KAAC,WAAD,EACI,sBAAsB,CAAE,IAD5B,CAEI,YAAY,CAAE,KAAKJ,KAAL,CAAWwB,iBAF7B,CAGI,uBAAuB,CAAE,KAAKrB,uBAHlC,CAII,gBAAgB,CAAE,KAAKiC,gBAJ3B,EAPJ,CAeK,KAAKC,qBAAL,EAfL,GADJ,EADJ,CAsBH,C,8BAhHyC7C,KAAK,CAAC8C,S,EAmHpD;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;OAlJqBxC,gB","sourcesContent":["import { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Breadcrumb, Button, Container, Table } from 'react-bootstrap';\r\nimport { DisplayMap, ProductMap, Transaction } from '../../../domain/dto/backendDos';\r\nimport { ShoppingCartItem } from '../../../domain/shoppingCartDos';\r\nimport BackendExtService from '../../../extService/BackendExtService';\r\nimport ShoppingCartService from '../../../service/ShoppingCartService';\r\nimport ProductList from '../../component/ProductList';\r\nimport Quantity from '../../component/quantity';\r\nimport './style.css';\r\n\r\ntype Props = {\r\n    shoppingCartService: ShoppingCartService\r\n};\r\ntype State = {\r\n    shoppingCartItems?: DisplayMap\r\n};\r\n\r\nexport default class ShoppingCartPage extends React.Component<Props, State> {\r\n    state = {} as State; //initial state\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.onLoadedShoppingCartItems = this.onLoadedShoppingCartItems.bind(this);\r\n        this.onClickRemoveItemButton = this.onClickRemoveItemButton.bind(this);\r\n        this.onClickCheckoutButton = this.onClickCheckoutButton.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        const cart = this.props.shoppingCartService.getCart();\r\n        const productIds = Object.keys(cart); /*find out all the keys in the object*/\r\n        BackendExtService.getShoppingCartItems(productIds, this.onLoadedShoppingCartItems)\r\n    }\r\n\r\n    onLoadedShoppingCartItems(data: ProductMap) {\r\n        const cart = this.props.shoppingCartService.getCart();\r\n\r\n        const displayItems: DisplayMap = {};\r\n        for (let productId of Object.keys(data)) {\r\n            const value = data[+productId];\r\n            displayItems[+productId] = {\r\n                id: value.id,\r\n                name: value.name,\r\n                description: value.description,\r\n                price: value.price,\r\n                imageUrl: value.imageUrl,\r\n                quantity: cart[+productId].productQuantity\r\n            };\r\n        }\r\n\r\n        this.setState({\r\n            shoppingCartItems: displayItems\r\n        })\r\n    }\r\n\r\n    onClickCheckoutButton() {\r\n        const checkoutItems: ShoppingCartItem[] = [];\r\n        for (let productId of Object.keys(this.state.shoppingCartItems!)) {\r\n            const item = this.state.shoppingCartItems![+productId];\r\n            checkoutItems.push({\r\n                productId: +productId,\r\n                productQuantity: item.quantity\r\n            })\r\n        }\r\n        BackendExtService.checkout(checkoutItems, this.onCreatedTransaction)\r\n        \r\n    }\r\n    onCreatedTransaction(data: Transaction) {\r\n        window.location.href = \"#/checkout/\" + data.transactionId;\r\n    }\r\n\r\n    onClickRemoveItemButton(productId: number) {\r\n        this.props.shoppingCartService.removeFromCart(productId);\r\n        // ... this state.shoppingCartItems means take everything\r\n        //inside this.props.displayItems out and put them into the new object\r\n        const shoppingCartItems = { ...this.state.shoppingCartItems };\r\n\r\n        delete shoppingCartItems[productId];\r\n\r\n        this.setState({\r\n            shoppingCartItems: shoppingCartItems\r\n        });\r\n    }\r\n\r\n    onUpdateQuantity(productId: number, quantity: number) {\r\n\r\n    }\r\n\r\n    renderCheckoutSection() {\r\n        if (!this.state.shoppingCartItems) {\r\n            return null;\r\n        }\r\n        let total = 0;\r\n        // the productId is the 1,2 in the shoppingCartItem list and take the sum of the price\r\n        for (let productId of Object.keys(this.state.shoppingCartItems)) {\r\n            total += this.state.shoppingCartItems[+productId].price;\r\n        }\r\n        return (\r\n            <section>\r\n                { /*TODO*sub total*/}\r\n                <hr /><h3>Total Price: {total}</h3>\r\n                <Button variant=\"primary\" onClick={this.onClickCheckoutButton}>Checkout</Button>\r\n            </section>\r\n        )\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"shoppingCart\">\r\n                <Container>\r\n                    <Breadcrumb>\r\n                        <Breadcrumb.Item href=\"#/\">All Products</Breadcrumb.Item>\r\n                        <Breadcrumb.Item active>Shopping Cart</Breadcrumb.Item>\r\n                    </Breadcrumb>\r\n\r\n                    {/* TODO: Add back ProductList Component here*/}\r\n                    <ProductList\r\n                        shouldShowRemoveButton={true}\r\n                        displayItems={this.state.shoppingCartItems}\r\n                        onClickRemoveItemButton={this.onClickRemoveItemButton}\r\n                        onUpdateQuantity={this.onUpdateQuantity}\r\n\r\n                    />\r\n\r\n                    {this.renderCheckoutSection()}\r\n\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// ArrayList<JSXElement> cartItems = new ArrayList<>();\r\n// for (productIds) {\r\n// \tcartItems.push(\r\n// \t\tnew TableRow(productId)\r\n// \t)\r\n// }\r\n\r\n// return [\r\n// \t<tr>1</tr>,\r\n// \t<tr>2</tr>,\r\n// \t<tr>3</tr>\r\n// ];\r\n\r\n// | |\r\n//  V\r\n\r\n// render() {\r\n// \t<Table>\r\n// \t\t{this.renderShoppingCartItems()}\r\n// \t</Table>\r\n// }\r\n\r\n// | |\r\n//  V\r\n\r\n//  render() {\r\n//  \t<Table>\r\n//  \t\t<tr>1</tr>\r\n// \t\t<tr>2</tr>\r\n// \t\t<tr>3</tr>\r\n// \t</Table>\r\n//  }"]},"metadata":{},"sourceType":"module"}