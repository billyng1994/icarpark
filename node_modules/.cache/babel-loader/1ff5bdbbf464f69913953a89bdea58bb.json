{"ast":null,"code":"var _jsxFileName = \"D:\\\\Venturnix\\\\ecommerce\\\\ecommerce-frontend\\\\src\\\\ui\\\\page\\\\ShoppingCartPage\\\\index.tsx\";\nimport React from 'react';\nimport { Breadcrumb, Button, Container } from 'react-bootstrap';\nimport BackendExtService from '../../../extService/BackendExtService';\nimport ProductList from '../../component/ProductList';\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ShoppingCartPage extends React.Component {\n  //initial state\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.onLoadedShoppingCartItems = this.onLoadedShoppingCartItems.bind(this);\n    this.onClickRemoveItemButton = this.onClickRemoveItemButton.bind(this);\n    this.onClickCheckoutButton = this.onClickCheckoutButton.bind(this);\n  }\n\n  componentDidMount() {\n    const cart = this.props.shoppingCartService.getCart();\n    const productIds = Object.keys(cart);\n    /*find out all the keys in the object*/\n\n    BackendExtService.getShoppingCartItems(productIds, this.onLoadedShoppingCartItems);\n  }\n\n  onLoadedShoppingCartItems(data) {\n    const cart = this.props.shoppingCartService.getCart();\n    const displayItems = {};\n\n    for (let productId of Object.keys(data)) {\n      const value = data[+productId];\n      displayItems[+productId] = {\n        id: value.id,\n        name: value.name,\n        description: value.description,\n        price: value.price,\n        imageUrl: value.imageUrl,\n        quantity: cart[+productId].productQuantity\n      };\n    }\n\n    this.setState({\n      shoppingCartItems: displayItems\n    });\n  }\n\n  onClickCheckoutButton() {\n    const checkoutItems = [];\n\n    for (let productId of Object.keys(this.state.shoppingCartItems)) {\n      const item = this.state.shoppingCartItems[+productId];\n      checkoutItems.push({\n        productId: +productId,\n        productQuantity: item.quantity\n      });\n    }\n\n    BackendExtService.checkout(checkoutItems, this.onCreatedTransaction);\n  }\n\n  onCreatedTransaction(data) {\n    window.location.href = \"#/checkout/\" + data.transactionId;\n  }\n\n  onClickRemoveItemButton(productId) {\n    this.props.shoppingCartService.removeFromCart(productId); // ... this state.shoppingCartItems means take everything\n    //inside this.props.displayItems out and put them into the new object\n\n    const shoppingCartItems = { ...this.state.shoppingCartItems\n    };\n    delete shoppingCartItems[productId];\n    this.setState({\n      shoppingCartItems: shoppingCartItems\n    });\n  }\n\n  onUpdateQuantity(productId, quantity) {}\n\n  renderCheckoutSection() {\n    if (!this.state.shoppingCartItems) {\n      return null;\n    }\n\n    let total = 0; // the productId is the 1,2 in the shoppingCartItem list and take the sum of the price\n\n    for (let productId of Object.keys(this.state.shoppingCartItems)) {\n      total += this.state.shoppingCartItems[+productId].price;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total Price: \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: this.onClickCheckoutButton,\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shoppingCart\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n          children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n            href: \"#/\",\n            children: \"All Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n            active: true,\n            children: \"Shopping Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n          shouldShowRemoveButton: true,\n          displayItems: this.state.shoppingCartItems,\n          onClickRemoveItemButton: this.onClickRemoveItemButton,\n          onUpdateQuantity: this.onUpdateQuantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), this.renderCheckoutSection()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this);\n  }\n\n} // ArrayList<JSXElement> cartItems = new ArrayList<>();\n// for (productIds) {\n// \tcartItems.push(\n// \t\tnew TableRow(productId)\n// \t)\n// }\n// return [\n// \t<tr>1</tr>,\n// \t<tr>2</tr>,\n// \t<tr>3</tr>\n// ];\n// | |\n//  V\n// render() {\n// \t<Table>\n// \t\t{this.renderShoppingCartItems()}\n// \t</Table>\n// }\n// | |\n//  V\n//  render() {\n//  \t<Table>\n//  \t\t<tr>1</tr>\n// \t\t<tr>2</tr>\n// \t\t<tr>3</tr>\n// \t</Table>\n//  }","map":{"version":3,"sources":["D:/Venturnix/ecommerce/ecommerce-frontend/src/ui/page/ShoppingCartPage/index.tsx"],"names":["React","Breadcrumb","Button","Container","BackendExtService","ProductList","ShoppingCartPage","Component","constructor","props","state","onLoadedShoppingCartItems","bind","onClickRemoveItemButton","onClickCheckoutButton","componentDidMount","cart","shoppingCartService","getCart","productIds","Object","keys","getShoppingCartItems","data","displayItems","productId","value","id","name","description","price","imageUrl","quantity","productQuantity","setState","shoppingCartItems","checkoutItems","item","push","checkout","onCreatedTransaction","window","location","href","transactionId","removeFromCart","onUpdateQuantity","renderCheckoutSection","total","render"],"mappings":";AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,SAA7B,QAAqD,iBAArD;AAGA,OAAOC,iBAAP,MAA8B,uCAA9B;AAEA,OAAOC,WAAP,MAAwB,6BAAxB;AAEA,OAAO,aAAP;;AASA,eAAe,MAAMC,gBAAN,SAA+BN,KAAK,CAACO,SAArC,CAA6D;AACnD;AACrBC,EAAAA,WAAW,CAACC,KAAD,EAAe;AACtB,UAAMA,KAAN;AADsB,SAD1BC,KAC0B,GADlB,EACkB;AAGtB,SAAKC,yBAAL,GAAiC,KAAKA,yBAAL,CAA+BC,IAA/B,CAAoC,IAApC,CAAjC;AACA,SAAKC,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BD,IAA7B,CAAkC,IAAlC,CAA/B;AACA,SAAKE,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BF,IAA3B,CAAgC,IAAhC,CAA7B;AACH;;AACDG,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,IAAI,GAAG,KAAKP,KAAL,CAAWQ,mBAAX,CAA+BC,OAA/B,EAAb;AACA,UAAMC,UAAU,GAAGC,MAAM,CAACC,IAAP,CAAYL,IAAZ,CAAnB;AAAsC;;AACtCZ,IAAAA,iBAAiB,CAACkB,oBAAlB,CAAuCH,UAAvC,EAAmD,KAAKR,yBAAxD;AACH;;AAEDA,EAAAA,yBAAyB,CAACY,IAAD,EAAmB;AACxC,UAAMP,IAAI,GAAG,KAAKP,KAAL,CAAWQ,mBAAX,CAA+BC,OAA/B,EAAb;AAEA,UAAMM,YAAwB,GAAG,EAAjC;;AACA,SAAK,IAAIC,SAAT,IAAsBL,MAAM,CAACC,IAAP,CAAYE,IAAZ,CAAtB,EAAyC;AACrC,YAAMG,KAAK,GAAGH,IAAI,CAAC,CAACE,SAAF,CAAlB;AACAD,MAAAA,YAAY,CAAC,CAACC,SAAF,CAAZ,GAA2B;AACvBE,QAAAA,EAAE,EAAED,KAAK,CAACC,EADa;AAEvBC,QAAAA,IAAI,EAAEF,KAAK,CAACE,IAFW;AAGvBC,QAAAA,WAAW,EAAEH,KAAK,CAACG,WAHI;AAIvBC,QAAAA,KAAK,EAAEJ,KAAK,CAACI,KAJU;AAKvBC,QAAAA,QAAQ,EAAEL,KAAK,CAACK,QALO;AAMvBC,QAAAA,QAAQ,EAAEhB,IAAI,CAAC,CAACS,SAAF,CAAJ,CAAiBQ;AANJ,OAA3B;AAQH;;AAED,SAAKC,QAAL,CAAc;AACVC,MAAAA,iBAAiB,EAAEX;AADT,KAAd;AAGH;;AAEDV,EAAAA,qBAAqB,GAAG;AACpB,UAAMsB,aAAiC,GAAG,EAA1C;;AACA,SAAK,IAAIX,SAAT,IAAsBL,MAAM,CAACC,IAAP,CAAY,KAAKX,KAAL,CAAWyB,iBAAvB,CAAtB,EAAkE;AAC9D,YAAME,IAAI,GAAG,KAAK3B,KAAL,CAAWyB,iBAAX,CAA8B,CAACV,SAA/B,CAAb;AACAW,MAAAA,aAAa,CAACE,IAAd,CAAmB;AACfb,QAAAA,SAAS,EAAE,CAACA,SADG;AAEfQ,QAAAA,eAAe,EAAEI,IAAI,CAACL;AAFP,OAAnB;AAIH;;AACD5B,IAAAA,iBAAiB,CAACmC,QAAlB,CAA2BH,aAA3B,EAA0C,KAAKI,oBAA/C;AAEH;;AACDA,EAAAA,oBAAoB,CAACjB,IAAD,EAAoB;AACpCkB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,gBAAgBpB,IAAI,CAACqB,aAA5C;AACH;;AAED/B,EAAAA,uBAAuB,CAACY,SAAD,EAAoB;AACvC,SAAKhB,KAAL,CAAWQ,mBAAX,CAA+B4B,cAA/B,CAA8CpB,SAA9C,EADuC,CAEvC;AACA;;AACA,UAAMU,iBAAiB,GAAG,EAAE,GAAG,KAAKzB,KAAL,CAAWyB;AAAhB,KAA1B;AAEA,WAAOA,iBAAiB,CAACV,SAAD,CAAxB;AAEA,SAAKS,QAAL,CAAc;AACVC,MAAAA,iBAAiB,EAAEA;AADT,KAAd;AAGH;;AAEDW,EAAAA,gBAAgB,CAACrB,SAAD,EAAoBO,QAApB,EAAsC,CAErD;;AAEDe,EAAAA,qBAAqB,GAAG;AACpB,QAAI,CAAC,KAAKrC,KAAL,CAAWyB,iBAAhB,EAAmC;AAC/B,aAAO,IAAP;AACH;;AACD,QAAIa,KAAK,GAAG,CAAZ,CAJoB,CAKpB;;AACA,SAAK,IAAIvB,SAAT,IAAsBL,MAAM,CAACC,IAAP,CAAY,KAAKX,KAAL,CAAWyB,iBAAvB,CAAtB,EAAiE;AAC7Da,MAAAA,KAAK,IAAI,KAAKtC,KAAL,CAAWyB,iBAAX,CAA6B,CAACV,SAA9B,EAAyCK,KAAlD;AACH;;AACD,wBACI;AAAA,8BAEI;AAAA;AAAA;AAAA;AAAA,cAFJ,eAEU;AAAA,oCAAkBkB,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,cAFV,eAGI,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,SAAhB;AAA0B,QAAA,OAAO,EAAE,KAAKlC,qBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAOH;;AAIDmC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,6BACI,QAAC,SAAD;AAAA,gCACI,QAAC,UAAD;AAAA,kCACI,QAAC,UAAD,CAAY,IAAZ;AAAiB,YAAA,IAAI,EAAC,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,UAAD,CAAY,IAAZ;AAAiB,YAAA,MAAM,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAOI,QAAC,WAAD;AACI,UAAA,sBAAsB,EAAE,IAD5B;AAEI,UAAA,YAAY,EAAE,KAAKvC,KAAL,CAAWyB,iBAF7B;AAGI,UAAA,uBAAuB,EAAE,KAAKtB,uBAHlC;AAII,UAAA,gBAAgB,EAAE,KAAKiC;AAJ3B;AAAA;AAAA;AAAA;AAAA,gBAPJ,EAeK,KAAKC,qBAAL,EAfL;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAsBH;;AAhHuE,C,CAmH5E;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Breadcrumb, Button, Container, Table } from 'react-bootstrap';\r\nimport { DisplayMap, ProductMap, Transaction } from '../../../domain/dto/backendDos';\r\nimport { ShoppingCartItem } from '../../../domain/shoppingCartDos';\r\nimport BackendExtService from '../../../extService/BackendExtService';\r\nimport ShoppingCartService from '../../../service/ShoppingCartService';\r\nimport ProductList from '../../component/ProductList';\r\nimport Quantity from '../../component/quantity';\r\nimport './style.css';\r\n\r\ntype Props = {\r\n    shoppingCartService: ShoppingCartService\r\n};\r\ntype State = {\r\n    shoppingCartItems?: DisplayMap\r\n};\r\n\r\nexport default class ShoppingCartPage extends React.Component<Props, State> {\r\n    state = {} as State; //initial state\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.onLoadedShoppingCartItems = this.onLoadedShoppingCartItems.bind(this);\r\n        this.onClickRemoveItemButton = this.onClickRemoveItemButton.bind(this);\r\n        this.onClickCheckoutButton = this.onClickCheckoutButton.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        const cart = this.props.shoppingCartService.getCart();\r\n        const productIds = Object.keys(cart); /*find out all the keys in the object*/\r\n        BackendExtService.getShoppingCartItems(productIds, this.onLoadedShoppingCartItems)\r\n    }\r\n\r\n    onLoadedShoppingCartItems(data: ProductMap) {\r\n        const cart = this.props.shoppingCartService.getCart();\r\n\r\n        const displayItems: DisplayMap = {};\r\n        for (let productId of Object.keys(data)) {\r\n            const value = data[+productId];\r\n            displayItems[+productId] = {\r\n                id: value.id,\r\n                name: value.name,\r\n                description: value.description,\r\n                price: value.price,\r\n                imageUrl: value.imageUrl,\r\n                quantity: cart[+productId].productQuantity\r\n            };\r\n        }\r\n\r\n        this.setState({\r\n            shoppingCartItems: displayItems\r\n        })\r\n    }\r\n\r\n    onClickCheckoutButton() {\r\n        const checkoutItems: ShoppingCartItem[] = [];\r\n        for (let productId of Object.keys(this.state.shoppingCartItems!)) {\r\n            const item = this.state.shoppingCartItems![+productId];\r\n            checkoutItems.push({\r\n                productId: +productId,\r\n                productQuantity: item.quantity\r\n            })\r\n        }\r\n        BackendExtService.checkout(checkoutItems, this.onCreatedTransaction)\r\n        \r\n    }\r\n    onCreatedTransaction(data: Transaction) {\r\n        window.location.href = \"#/checkout/\" + data.transactionId;\r\n    }\r\n\r\n    onClickRemoveItemButton(productId: number) {\r\n        this.props.shoppingCartService.removeFromCart(productId);\r\n        // ... this state.shoppingCartItems means take everything\r\n        //inside this.props.displayItems out and put them into the new object\r\n        const shoppingCartItems = { ...this.state.shoppingCartItems };\r\n\r\n        delete shoppingCartItems[productId];\r\n\r\n        this.setState({\r\n            shoppingCartItems: shoppingCartItems\r\n        });\r\n    }\r\n\r\n    onUpdateQuantity(productId: number, quantity: number) {\r\n\r\n    }\r\n\r\n    renderCheckoutSection() {\r\n        if (!this.state.shoppingCartItems) {\r\n            return null;\r\n        }\r\n        let total = 0;\r\n        // the productId is the 1,2 in the shoppingCartItem list and take the sum of the price\r\n        for (let productId of Object.keys(this.state.shoppingCartItems)) {\r\n            total += this.state.shoppingCartItems[+productId].price;\r\n        }\r\n        return (\r\n            <section>\r\n                { /*TODO*sub total*/}\r\n                <hr /><h3>Total Price: {total}</h3>\r\n                <Button variant=\"primary\" onClick={this.onClickCheckoutButton}>Checkout</Button>\r\n            </section>\r\n        )\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"shoppingCart\">\r\n                <Container>\r\n                    <Breadcrumb>\r\n                        <Breadcrumb.Item href=\"#/\">All Products</Breadcrumb.Item>\r\n                        <Breadcrumb.Item active>Shopping Cart</Breadcrumb.Item>\r\n                    </Breadcrumb>\r\n\r\n                    {/* TODO: Add back ProductList Component here*/}\r\n                    <ProductList\r\n                        shouldShowRemoveButton={true}\r\n                        displayItems={this.state.shoppingCartItems}\r\n                        onClickRemoveItemButton={this.onClickRemoveItemButton}\r\n                        onUpdateQuantity={this.onUpdateQuantity}\r\n\r\n                    />\r\n\r\n                    {this.renderCheckoutSection()}\r\n\r\n                </Container>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// ArrayList<JSXElement> cartItems = new ArrayList<>();\r\n// for (productIds) {\r\n// \tcartItems.push(\r\n// \t\tnew TableRow(productId)\r\n// \t)\r\n// }\r\n\r\n// return [\r\n// \t<tr>1</tr>,\r\n// \t<tr>2</tr>,\r\n// \t<tr>3</tr>\r\n// ];\r\n\r\n// | |\r\n//  V\r\n\r\n// render() {\r\n// \t<Table>\r\n// \t\t{this.renderShoppingCartItems()}\r\n// \t</Table>\r\n// }\r\n\r\n// | |\r\n//  V\r\n\r\n//  render() {\r\n//  \t<Table>\r\n//  \t\t<tr>1</tr>\r\n// \t\t<tr>2</tr>\r\n// \t\t<tr>3</tr>\r\n// \t</Table>\r\n//  }"]},"metadata":{},"sourceType":"module"}