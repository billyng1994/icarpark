{"ast":null,"code":"import _classCallCheck from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Venturnix/ecommerce/ecommerce-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Breadcrumb,Container,Toast}from\"react-bootstrap\";import Button from\"react-bootstrap/esm/Button\";import{withRouter}from\"react-router-dom\";import BackendExtService from\"../../../extService/BackendExtService\";import Quantity from\"../../component/quantity\";import\"./style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetailPage=/*#__PURE__*/function(_React$Component){_inherits(ProductDetailPage,_React$Component);var _super=_createSuper(ProductDetailPage);function ProductDetailPage(props){var _this;_classCallCheck(this,ProductDetailPage);_this=_super.call(this,props);_this.state={isShowToast:false,productQuantity:1};_this.onClickAddToCartButton=_this.onClickAddToCartButton.bind(_assertThisInitialized(_this));_this.onLoadedProductDetail=_this.onLoadedProductDetail.bind(_assertThisInitialized(_this));_this.onCloseToast=_this.onCloseToast.bind(_assertThisInitialized(_this));_this.onUpdateQuantity=_this.onUpdateQuantity.bind(_assertThisInitialized(_this));return _this;}_createClass(ProductDetailPage,[{key:\"componentDidMount\",value:function componentDidMount(){BackendExtService.getProductDetail(+this.props.match.params.productId,this.onLoadedProductDetail);}},{key:\"onLoadedProductDetail\",value:function onLoadedProductDetail(data){this.setState({productDetail:data});}},{key:\"onClickAddToCartButton\",value:function onClickAddToCartButton(){var shoppingCartService=this.props.shoppingCartService;var productDetail=this.state.productDetail;var productQuantity=this.state.productQuantity;shoppingCartService.addToCart(productDetail.id,productQuantity);this.setState({isShowToast:true});}},{key:\"onUpdateQuantity\",value:function onUpdateQuantity(productId,quantity){alert(productId+\": \"+quantity);// ShoppingCartService update product's quantity\n// setState to update quantity\nthis.setState({productQuantity:quantity});}},{key:\"renderProductDetail\",value:function renderProductDetail(){var productDetail=this.state.productDetail;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Breadcrumb,{children:[/*#__PURE__*/_jsx(Breadcrumb.Item,{href:\"#/\",children:\"All Products\"}),/*#__PURE__*/_jsx(Breadcrumb.Item,{active:true,children:productDetail.name})]}),/*#__PURE__*/_jsx(\"h1\",{children:productDetail.name}),/*#__PURE__*/_jsx(\"img\",{className:\"bannerImage\",src:productDetail.imageUrl,alt:\"Product \"+productDetail.name+\" Image\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"p\",{children:productDetail.description}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Price: $\",productDetail.price]}),/*#__PURE__*/_jsx(Quantity,{productId:productDetail.id,quantity:this.state.productQuantity,onUpdateQuantity:this.onUpdateQuantity}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:this.onClickAddToCartButton,children:\"Add to cart\"})]});}},{key:\"onCloseToast\",value:function onCloseToast(){this.setState({isShowToast:false});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"productDetail\",children:/*#__PURE__*/_jsxs(Container,{id:\"productDetailPage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"toastContainer\",children:/*#__PURE__*/_jsxs(Toast,{show:this.state.isShowToast,onClose:this.onCloseToast,delay:3000,autohide:true,children:[/*#__PURE__*/_jsxs(Toast.Header,{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"mr-auto\",children:\"Added\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Click to close\"})]}),/*#__PURE__*/_jsx(Toast.Body,{children:\"It has been added to the cart. You can continue shopping\"})]})}),this.state.productDetail?this.renderProductDetail():/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})]})});}}]);return ProductDetailPage;}(React.Component);export default withRouter(ProductDetailPage);","map":{"version":3,"sources":["D:/Venturnix/ecommerce/ecommerce-frontend/src/ui/page/ProductDetailPage/index.tsx"],"names":["React","Breadcrumb","Container","Toast","Button","withRouter","BackendExtService","Quantity","ProductDetailPage","props","state","isShowToast","productQuantity","onClickAddToCartButton","bind","onLoadedProductDetail","onCloseToast","onUpdateQuantity","getProductDetail","match","params","productId","data","setState","productDetail","shoppingCartService","addToCart","id","quantity","alert","name","imageUrl","description","price","renderProductDetail","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Breadcrumb, Container, Form, Toast } from \"react-bootstrap\";\r\nimport Button from \"react-bootstrap/esm/Button\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { ProductItem } from \"../../../domain/dto/backendDos\";\r\nimport { ShoppingCartItem } from \"../../../domain/shoppingCartDos\";\r\nimport BackendExtService from \"../../../extService/BackendExtService\";\r\nimport ShoppingCartService from \"../../../service/ShoppingCartService\";\r\nimport Quantity from \"../../component/quantity\";\r\nimport \"./style.css\";\r\n\r\ntype RouterParams = {\r\n    productId: string\r\n};\r\n\r\ntype Props = RouteComponentProps<RouterParams> & {\r\n    shoppingCartService: ShoppingCartService\r\n    \r\n};\r\ntype State = {\r\n    productDetail?: ProductItem\r\n    productQuantity: number\r\n    isShowToast: boolean\r\n};\r\n\r\nclass ProductDetailPage extends React.Component<Props, State> {\r\n    state = {\r\n        isShowToast: false,\r\n        productQuantity:1\r\n    } as State;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.onClickAddToCartButton = this.onClickAddToCartButton.bind(this);\r\n        this.onLoadedProductDetail = this.onLoadedProductDetail.bind(this);\r\n        this.onCloseToast = this.onCloseToast.bind(this);\r\n        this.onUpdateQuantity = this.onUpdateQuantity.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        BackendExtService.getProductDetail(+this.props.match.params.productId, this.onLoadedProductDetail);    \r\n    }\r\n\r\n    onLoadedProductDetail(data: ProductItem) {\r\n        this.setState({ productDetail: data });\r\n    }\r\n\r\n    onClickAddToCartButton() {\r\n        const shoppingCartService = this.props.shoppingCartService;\r\n        const productDetail = this.state.productDetail!;\r\n        const productQuantity = this.state.productQuantity;       \r\n        shoppingCartService.addToCart(productDetail.id,productQuantity);\r\n        this.setState({\r\n            isShowToast: true\r\n        });\r\n    }\r\n\r\n    onUpdateQuantity(productId: number, quantity: number) {\r\n        alert(productId + \": \" + quantity);\r\n        // ShoppingCartService update product's quantity\r\n\r\n        // setState to update quantity\r\n        this.setState({\r\n            productQuantity: quantity\r\n        })\r\n    }\r\n\r\n    renderProductDetail() {\r\n        const productDetail = this.state.productDetail!;\r\n\r\n        return (\r\n            <div>\r\n                <Breadcrumb>\r\n                    <Breadcrumb.Item href=\"#/\">All Products</Breadcrumb.Item>\r\n                    <Breadcrumb.Item active>{productDetail.name}</Breadcrumb.Item>\r\n                </Breadcrumb>\r\n                <h1>{productDetail.name}</h1>\r\n                <img className=\"bannerImage\" src={productDetail.imageUrl} alt={\"Product \" + productDetail.name + \" Image\"} />\r\n\r\n                <h3>Description: </h3>\r\n                <p>{productDetail.description}</p>\r\n\r\n                <h4>Price: ${productDetail.price}</h4>\r\n                \r\n                <Quantity \r\n                    productId={productDetail.id}\r\n                    quantity={this.state.productQuantity}\r\n                    onUpdateQuantity={this.onUpdateQuantity}\r\n                />\r\n                <Button\r\n                    variant=\"primary\"\r\n                    onClick={this.onClickAddToCartButton}\r\n                >\r\n                    Add to cart\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onCloseToast() {\r\n        this.setState({\r\n            isShowToast: false\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"productDetail\">\r\n                <Container id=\"productDetailPage\">\r\n                    <div className=\"toastContainer\">\r\n                        <Toast show={this.state.isShowToast} onClose={this.onCloseToast} delay={3000} autohide>\r\n                            <Toast.Header>\r\n                                <strong className=\"mr-auto\">Added</strong>\r\n                                <small>Click to close</small>\r\n                            </Toast.Header>\r\n                            <Toast.Body>It has been added to the cart. You can continue shopping</Toast.Body>\r\n                        </Toast>\r\n                    </div>\r\n                    {\r\n                        (this.state.productDetail) ? this.renderProductDetail() : (\r\n                            <div>Loading...</div>\r\n                        )\r\n                    }\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(ProductDetailPage);"]},"metadata":{},"sourceType":"module"}