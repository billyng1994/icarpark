{"ast":null,"code":"import firebase from 'firebase';\nexport default class AuthService {\n  constructor(onAuthStateChange) {\n    this.firebaseConfig = {\n      apiKey: \"AIzaSyA8QwQuc5kHcPXv2CSwjph2C_pznIAZZ0Y\",\n      authDomain: \"rafe-venturenix-project.firebaseapp.com\",\n      projectId: \"rafe-venturenix-project\",\n      storageBucket: \"rafe-venturenix-project.appspot.com\",\n      messagingSenderId: \"214419668077\",\n      appId: \"1:214419668077:web:be42c5b042ed852cff9364\",\n      measurementId: \"G-1HF0PJ0NTK\"\n    };\n    this.signedInEmail = void 0;\n    this.onAuthStateChange = void 0;\n    this.onAuthStateChange = onAuthStateChange;\n  }\n\n  init() {\n    if (!firebase.apps.length) {\n      firebase.initializeApp(this.firebaseConfig);\n    } else {\n      firebase.app();\n    } //below kinda blackbox, for firebase received email,password and pass it as user in onAuthStateChange function\n\n\n    firebase.auth().onAuthStateChanged(user => {\n      console.log(\"onAuthStateChanged: \", user);\n\n      if (user) {\n        //signed in\n        this.signedInEmail = user === null || user === void 0 ? void 0 : user.email;\n        this.onAuthStateChange(false);\n      } else {\n        //signed out\n        this.signedInEmail = undefined;\n        this.onAuthStateChange(false);\n      }\n    });\n  }\n\n  isSignedIn() {\n    return this.signedInEmail != undefined && this.signedInEmail != null;\n  }\n\n  signInWithEmailPassword(email, password, onError) {\n    this.onAuthStateChange(true);\n    firebase.auth().signOut().then(() => {\n      firebase.auth().signInWithEmailAndPassword(email, password).catch(error => {\n        console.log(error);\n        onError(error.code, error.message);\n        this.onAuthStateChange(false);\n      });\n    });\n  }\n\n  signInWithGoogle(onError) {\n    this.onAuthStateChange(true);\n    firebase.auth().signOut().then(() => {\n      const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(googleAuthProvider).catch(error => {\n        console.log(error);\n        onError(error.code, error.message);\n        this.onAuthStateChange(false);\n      });\n    });\n  }\n\n  signInWithFacebook(onError) {\n    this.onAuthStateChange(true);\n    firebase.auth().signOut().then(() => {\n      const facebookAuthProvider = new firebase.auth.FacebookAuthProvider();\n      firebase.auth().signInWithPopup(facebookAuthProvider).catch(error => {\n        console.log(error);\n        onError(error.code, error.message);\n        this.onAuthStateChange(false);\n      });\n    });\n  }\n\n  signOut() {\n    this.onAuthStateChange(true);\n    firebase.auth().signOut();\n  }\n\n}","map":{"version":3,"sources":["D:/Venturnix/ecommerce/ecommerce-frontend/src/service/AuthService.ts"],"names":["firebase","AuthService","constructor","onAuthStateChange","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","signedInEmail","init","apps","length","initializeApp","app","auth","onAuthStateChanged","user","console","log","email","undefined","isSignedIn","signInWithEmailPassword","password","onError","signOut","then","signInWithEmailAndPassword","catch","error","code","message","signInWithGoogle","googleAuthProvider","GoogleAuthProvider","signInWithPopup","signInWithFacebook","facebookAuthProvider","FacebookAuthProvider"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\r\nimport React from 'react'\r\n\r\ntype OnAuthStateChange = (isLoading: boolean) => void;\r\ntype OnSignInError = (code: string, message: string) => void;\r\n\r\nexport default class AuthService {\r\n  firebaseConfig = {\r\n    apiKey: \"AIzaSyA8QwQuc5kHcPXv2CSwjph2C_pznIAZZ0Y\",\r\n    authDomain: \"rafe-venturenix-project.firebaseapp.com\",\r\n    projectId: \"rafe-venturenix-project\",\r\n    storageBucket: \"rafe-venturenix-project.appspot.com\",\r\n    messagingSenderId: \"214419668077\",\r\n    appId: \"1:214419668077:web:be42c5b042ed852cff9364\",\r\n    measurementId: \"G-1HF0PJ0NTK\"\r\n  };\r\n\r\n  signedInEmail?: string | null;\r\n\r\n  onAuthStateChange: OnAuthStateChange;\r\n\r\n  constructor(onAuthStateChange: OnAuthStateChange) {\r\n    this.onAuthStateChange = onAuthStateChange;\r\n  }\r\n\r\n  init() {\r\n    if (!firebase.apps.length){\r\n    firebase.initializeApp(this.firebaseConfig);\r\n  } else{\r\n    firebase.app();\r\n  }\r\n    //below kinda blackbox, for firebase received email,password and pass it as user in onAuthStateChange function\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      console.log(\"onAuthStateChanged: \", user)\r\n      if (user) {\r\n        //signed in\r\n        this.signedInEmail = user?.email;\r\n        this.onAuthStateChange(false);\r\n      } else {\r\n        //signed out\r\n        this.signedInEmail = undefined;\r\n        this.onAuthStateChange(false)\r\n      }\r\n    })\r\n  }\r\n\r\n  isSignedIn() {\r\n    return this.signedInEmail != undefined && this.signedInEmail != null;\r\n  }\r\n\r\n  signInWithEmailPassword(email: string, password: string, onError: OnSignInError) {\r\n    this.onAuthStateChange(true);\r\n\r\n    firebase.auth().signOut()\r\n      .then(() => {\r\n        firebase.auth().signInWithEmailAndPassword(email, password)\r\n          .catch((error) => {\r\n            console.log(error);\r\n            onError(error.code, error.message);\r\n            this.onAuthStateChange(false);\r\n          });\r\n      });\r\n  }\r\n\r\n  signInWithGoogle(onError: OnSignInError) {\r\n    this.onAuthStateChange(true);\r\n\r\n    firebase.auth().signOut()\r\n      .then(() => {\r\n        const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n        firebase.auth().signInWithPopup(googleAuthProvider)\r\n          .catch((error) => {\r\n            console.log(error);\r\n            onError(error.code, error.message);\r\n            this.onAuthStateChange(false);\r\n          });\r\n      });\r\n  }\r\n\r\n  signInWithFacebook(onError: OnSignInError) {\r\n    this.onAuthStateChange(true);\r\n\r\n    firebase.auth().signOut()\r\n      .then(() => {\r\n        const facebookAuthProvider = new firebase.auth.FacebookAuthProvider();\r\n        firebase.auth().signInWithPopup(facebookAuthProvider)\r\n          .catch((error) => {\r\n            console.log(error);\r\n            onError(error.code, error.message);\r\n            this.onAuthStateChange(false);\r\n          });\r\n      });\r\n  }\r\n\r\n  signOut() {\r\n    this.onAuthStateChange(true);\r\n    firebase.auth().signOut()\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}